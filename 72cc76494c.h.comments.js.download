'https://github.com/swmff/rainbeam';function asyncGeneratorStep(e,t,n,r,o,s,c){try{var a=e[s](c),u=a.value}catch(e){n(e);return}a.done?t(u):Promise.resolve(u).then(r,o)}function _async_to_generator(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var s=e.apply(t,n);function c(e){asyncGeneratorStep(s,r,o,c,a,"next",e)}function a(e){asyncGeneratorStep(s,r,o,c,a,"throw",e)}c(void 0)})}}function _ts_generator(e,t){var n,r,o,s,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,r=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){c=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){c.label=s[1];break}if(6===s[0]&&c.label<o[1]){c.label=o[1],o=s;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(s);break}o[2]&&c.ops.pop(),c.trys.pop();continue}s=t.call(e,c)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}!function(){var e,t,n,r=reg_ns("comments",["app"]);r.define("create",(e=_async_to_generator(function(e,t,n,r,o){var s;return _ts_generator(this,function(c){switch(c.label){case 0:return e.$,[4,(s=e.app).debounce("responses::create")];case 1:return c.sent(),[2,new Promise(function(e,c){fetch("/api/v1/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({response:t,content:n,reply:r,anonymous:o})}).then(function(e){return e.json()}).then(function(t){return(s.toast(t.success?"success":"error",t.success?"Comment posted!":t.message),!0===t.success)?e(t):c(t)})})]}})}),function(t,n,r,o,s){return e.apply(this,arguments)})),r.define("edit",function(e,t,n){e.$;var r=e.app;return new Promise(function(e,o){fetch("/api/v1/comments/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:n})}).then(function(e){return e.json()}).then(function(t){return(r.toast(t.success?"success":"error",t.success?"Comment edited!":t.message),!0===t.success)?e(t):o(t)})})}),r.define("delete",(t=_async_to_generator(function(e,t){var n;return _ts_generator(this,function(r){switch(r.label){case 0:return e.$,n=e.app,[4,trigger("app::confirm",["Are you sure you want to do this?"])];case 1:if(!r.sent())return[2];return fetch("/api/v1/comments/".concat(t),{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){n.toast(e.success?"success":"error",e.success?"Comment deleted!":e.message),n.smooth_remove(document.getElementById("comment:".concat(t)),500)}),[2]}})}),function(e,n){return t.apply(this,arguments)})),r.define("ipblock",(n=_async_to_generator(function(e,t){var n;return _ts_generator(this,function(r){switch(r.label){case 0:return e._,n=e.app,[4,trigger("app::confirm",["Are you sure you want to do this?"])];case 1:if(!r.sent())return[2];return fetch("/api/v1/comments/".concat(t,"/ipblock"),{method:"POST"}).then(function(e){return e.json()}).then(function(e){n.toast(e.success?"success":"error",e.success?"IP blocked!":e.message)}),[2]}})}),function(e,t){return n.apply(this,arguments)}))}();